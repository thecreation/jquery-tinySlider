/*! TinySlider - v0.1.0 - 2012-12-09
* https://github.com/KaptinLin/tinySlider
* Copyright (c) 2012 KaptinLin; Licensed GPL */
(function(e,t,n,r){"use strict";var i=n.TinySlider=function(r,s){this.element=r,this.$element=n(r);var o=[];n.each(this.$element.data(),function(e,t){var n=new RegExp("^tinyslider","i");n.test(e)&&(o[e.toLowerCase().replace(n,"")]=t)}),this.options=n.extend(!0,{},i.defaults,s,o);var u=this.options.namespace;this.classes={},this.classes.activeSlide=this.options.namespace+"-slide-active",this.classes.activePager=this.options.namespace+"-pager-active",this.$element.addClass(u+"-container"),this.$ul=this.$element.children("ul"),this.$viewport=this.$ul.wrap('<div class="'+u+'-viewport" />').parent(),this.$slides=this.$ul.children();var a=this;n.extend(a,{init:function(){a.options.pager&&this.pager.setup(),a.options.nav&&this.nav.setup(),a.options.random&&(a.$slides.sort(function(){return Math.round(Math.random())-.5}),a.$ul.empty().append(a.$slides)),a.animations[a.options.animation].setup(),a.$viewport.attr("data-animation",a.options.animation),a.$viewport.on("go",function(e,t){e.stopPropagation(),a.$viewport.trigger("animation_start",{current:a.current,index:t.index}),a.animations[a.options.animation].run(t)}),a.current=0,a.wait=null,a.cycle=!1,a.sliding=!1,a.active(a.current),a.options.start.call(a),a.options.autoplay&&(a.autoplay.enabled=!0,a.autoplay.start()),a.options.pauseOnHover&&a.$viewport.hover(function(){a.autoplay.enabled&&a.pause()},function(){a.autoplay.enabled&&a.play()}),a.options.touch&&a.touch.setup(),a.$viewport.on("animation_start",function(e,t){e.stopPropagation(),a.sliding=!0,a.options.before.call(a)}),a.$viewport.on("animation_end",function(e,t){e.stopPropagation(),a.sliding=!1,a.current=t.index,a.active(t.index),a.options.after.call(a),a.wait?a.goTo(a.wait):a.autoplay.enabled&&a.autoplay.start()})},autoplay:{enabled:!1,timeout:null,start:function(){a.autoplay.timeout&&clearTimeout(a.autoplay.timeout),a.autoplay.timeout=setTimeout(function(){a.go()},a.options.delay)},stop:function(){clearTimeout(a.autoplay.timeout)}},active:function(e){a.$slides.removeClass(a.classes.activeSlide).eq(e).addClass(a.classes.activeSlide)},pager:{setup:function(){a.$pager=n('<ul class="'+u+'-pager" />');var e=[];a.$slides.each(function(t){var n=t+1;e+="<li><a href='#'>"+n+"</a>"+"</li>"}),a.$pager.append(e),a.$pager.appendTo(a.$element),a.pager.$items=a.$pager.children(),a.pager.bind()},bind:function(){a.$viewport.on("go",function(e,t){a.pager.active(t.index)}),a.$pager.delegate("li","click",function(){a.goTo(n(this).index())})},active:function(e){a.pager.$items.removeClass(a.classes.activePager).eq(e).addClass(a.classes.activePager)}},nav:{setup:function(){a.$nav=n('<div class="'+u+'-nav">'+'<a href="#" class="'+u+'-nav-prev">'+a.options.prevText+"</a>"+'<a href="#" class="'+u+'-nav-next">'+a.options.nextText+"</a>"+"</div>"),a.$nav.appendTo(a.$element),a.$nav.delegate("a","click",function(){n(this).is("."+u+"-nav-prev")?a.prev():a.next()})}},animations:{fade:{setup:function(){},run:function(e){a.$slides.eq(a.current).fadeOut(a.options.duration,a.options.easing),a.$slides.eq(e.index).fadeIn(a.options.duration,a.options.easing,function(){a.$viewport.trigger("animation_end",{index:e.index})})}},slide:{setup:function(){var t=a.$viewport.width();a.$slides.width(t),a.$ul.width(100*a.$slides.length+"%"),n(e).on("resize",function(){var e=a.$viewport.width();a.$slides.width(e)})},run:function(e){a.cycle?(a.$ul.attr("data-cycle",a.cycle),a.$slides.eq(e.index).css("display","block"),a.$ul.width("200%"),a.cycle==="prev"?a.$ul.css("marginLeft","-100%").animate({marginLeft:null},a.options.duration,a.options.easing,function(){a.$ul.attr("data-cycle",null),a.$slides.eq(e.index).css("display",null),a.$ul.css({width:100*a.$slides.length+"%",marginLeft:"-"+e.index*100+"%"}),a.cycle=!1,a.$viewport.trigger("animation_end",{index:e.index})}):a.$ul.css("marginLeft","0").animate({marginLeft:"-100%"},a.options.duration,a.options.easing,function(){a.$ul.attr("data-cycle",null),a.$slides.eq(e.index).css("display",null),a.$ul.css({width:100*a.$slides.length+"%",marginLeft:"-"+e.index*100+"%"}),a.cycle=!1,a.$viewport.trigger("animation_end",{index:e.index})})):a.$ul.animate({marginLeft:"-"+e.index*100+"%"},a.options.duration,a.options.easing,function(){a.$viewport.trigger("animation_end",{index:e.index})})}}},touch:{setup:function(){if(!("ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch))return;a.$viewport.on("touchstart",function(e){a.sliding&&e.preventDefault();var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,n=t.pageX;return a.$viewport.on("touchmove",function(e){e.preventDefault(),t=e.originalEvent.touches?e.originalEvent.touches[0]:e,t.pageX-n>75?(a.$viewport.off("touchmove"),a.prev()):t.pageX-n<-75&&(a.$viewport.off("touchmove"),a.next())}).on("touchend",function(){a.$viewport.off("touchmove")}),!1})}}}),a.init()};i.defaults={namespace:"tiny",animation:"fade",easing:"swing",duration:1e3,delay:4e3,pager:!1,nav:!1,prevText:"Previous",nextText:"Next",random:!1,autoplay:!1,pauseOnHover:!0,touch:!0,start:function(){},before:function(){},after:function(){},end:function(){}},i.prototype={constructor:i,play:function(){this.autoplay.enabled=!0,this.autoplay.start()},pause:function(){this.autoplay.stop()},stop:function(){this.autoplay.enabled=!1,this.autoplay.stop()},next:function(){var e=this.current+1;e>=this.$slides.length&&(e=0,this.cycle="next"),this.goTo(e)},prev:function(){var e=this.current-1;e<0&&(e=this.$slides.length-1,this.cycle="prev"),this.goTo(e)},go:function(){var e=this.current+1>=this.$slides.length?0:this.current+1;this.goTo(e)},goTo:function(e){if(this.current===e)return!1;this.sliding?this.wait=e:(this.wait=null,this.$viewport.trigger("go",{index:e}))}},n.fn.tinySlider=function(e){if(typeof e=="string"){var t=e,s=arguments.length>1?Array.prototype.slice.call(arguments,1):r;return this.each(function(){var e=n.data(this,"tinyslider");typeof e[t]=="function"&&e[t].apply(e,s)})}return this.each(function(){n.data(this,"tinyslider")||n.data(this,"tinyslider",new i(this,e))})}})(window,document,jQuery);